<ScrollView height="100%">
    <StackLayout @slideUpFadeStagger>
        <!-- header -->
        <ns-header headerTitle="MOVIES" hasMenuButton="true"></ns-header>

        <!-- featured -->
        <ng-container *ngIf="featuredMovie$ | async as movie">
            <GridLayout height="250" rows="*" columns="*" (loaded)="applyShadow($event)">
                <Image row="0" col="0" height="100%" width="100%" stretch="aspectFill"
                    [src]="movie.image.cover"></Image>
                <!-- fade layer -->
                <ContentView backgroundColor="#666666" opacity="0.7" row="0" col="0" height="100%" width="100%"></ContentView>

                <!-- content -->
                <StackLayout row="0" col="0" verticalAlignment="bottom" horizontalAlignment="left" width="75%" padding="20">
                    <Label [text]="movie.title | uppercase" class="bold" fontSize="20" color="#fff"></Label>
                    <Label [text]="movie.description" fontSize="15" color="#ddd" marginTop="7" textWrap="true"></Label>

                    <Button text="PLAY NOW" marginTop="20" horizontalAlignment="left" class="bg-color-primary bold" padding="15 0"
                    width="150" borderRadius="7" color="#fff" fontSize="14"></Button>
                </StackLayout>
            </GridLayout>
        </ng-container>

        <!-- categories-->
        <Label *ngIf="true" text="Categories" class="bold" fontSize="18" margin="20 20 0 20"></Label>
        <ng-container *ngIf="categories$ | async as categories">
            <ScrollView orientation="horizontal">
                <StackLayout orientation="horizontal" padding="10 20">
                    <ng-container *ngFor="let category of categories">
                        <GridLayout (loaded)="applyShadow($event)" height="80" width="160" rows="*" columns="*" marginRight="10">
                            <Image [src]="category.image" stretch="aspectFill" borderRadius="10"></Image>
                            <!-- mask -->
                            <ContentView class="bg-color-primary" opacity="0.7" borderRadius="10"></ContentView>

                            <Label [text]="category.displayName | uppercase" color="#fff" class="bold" fontSize="17"
                                textAlignment="center"></Label>
                        </GridLayout>
                    </ng-container>
                </StackLayout>
            </ScrollView>
        </ng-container>


        <!-- favorites -->
        <Label *ngIf="true" text="My List" class="bold" fontSize="18" margin="20 20 0 20"></Label>
        <ng-container *ngIf="favoriteMovies$ | async as movies">
            <ScrollView orientation="horizontal">
                <StackLayout orientation="horizontal" padding="10 20">
                    <ng-container *ngFor="let movie of movies">
                        <ContentView (tap)="navigateToMovieDetails(movie.id)">
                            <ns-thumbnail-card [imageSrc]="movie.image.thumbnail"></ns-thumbnail-card>
                        </ContentView>
                    </ng-container>
                </StackLayout>
            </ScrollView>
        </ng-container>

        <!-- recommendations -->
        <Label *ngIf="true" text="Recommendations" class="bold" fontSize="18" margin="20 20 0 20"></Label>
        <ng-container *ngIf="recommendedMovies$ | async as movies">
            <ScrollView orientation="horizontal">
                <StackLayout orientation="horizontal" padding="10 20">
                    <ng-container *ngFor="let movie of movies">
                        <ContentView (tap)="navigateToMovieDetails(movie.id)">
                            <ns-thumbnail-card [imageSrc]="movie.image.thumbnail" (tap)="navigateToMovieDetails(movie.id)"></ns-thumbnail-card>
                        </ContentView>
                    </ng-container>
                </StackLayout>
            </ScrollView>
        </ng-container>

    </StackLayout>
</ScrollView>